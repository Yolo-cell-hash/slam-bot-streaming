<%- include('partials/header') %>
<body>
    <h1>Camera Feed</h1>
    <video id="videoElement" autoplay></video>
    
    <script>
        const video = document.getElementById('videoElement');
        const ws = new WebSocket('ws://YOUR_SERVER_IP_ADDRESS:3000'); // Update with your server IP

        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(stream) {
                video.srcObject = stream;
                setInterval(() => captureFrame(), 1000); // Capture frame every second
            })
            .catch(function(err) {
                console.log('Error accessing the camera:', err);
            });

        function captureFrame() {
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            const imageData = canvas.toDataURL('image/jpeg'); // Convert frame to base64 JPEG
            ws.send(imageData); // Send frame to server
        }
    </script>
</body>



<%- include('partials/footer') %>
